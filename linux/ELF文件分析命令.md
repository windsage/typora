# ELF文件分析工具对比

------

### 1. `nm`：**列出符号表（symbol table）**

- **用途**：查看目标文件中的符号（函数、变量）及其类型、地址。

- **常用场景**：调试静态库、定位链接错误（如未定义符号）。

- **常用命令**：

  ```bash
  nm -C libfoo.a
  ```

  - `-C`：对 C++ 符号进行 demangle（还原原始函数名），非常实用。

------

### 2. `readelf`：**读取 ELF 文件结构信息**

- **用途**：查看 ELF 文件的内部结构（段、节、符号表、动态链接信息等）。

- **常用场景**：深入分析二进制文件的格式和链接信息。

- **常用命令**：

  ```bash
  readelf -a main
  ```

  - `-a`：等价于 `--all`，显示所有信息。
  - 常配合使用的有：
    - `-h`：查看 ELF 文件头
    - `-S`：查看 section 表（节表）
    - `-s`：查看 symbol 表（符号）

------

### 3. `objdump`：**反汇编和结构分析**

- **用途**：反汇编程序、查看段信息、分析指令级内容。

- **常用场景**：调试优化、逆向分析、性能分析。

- **常用命令**：

  ```bash
  objdump -d main
  ```

  - `-d`：反汇编所有的可执行段（.text 段）
  - 常配合：
    - `-C`：C++ 符号 demangle
    - `-S`：将反汇编结果和源代码关联显示（若有调试符号）

------

### 4. `strings`：**提取文件中的可打印字符串**

- **用途**：提取二进制文件中可读字符串。

- **常用场景**：寻找调试信息、提示信息、函数名等。

- **常用命令**：

  ```bash
  strings libfoo.so
  ```

  - 可以加 `-n <length>` 控制最短输出字符串长度，如：

    ```bash
    strings -n 6 libfoo.so
    ```

------

### 5. `ldd`：**查看共享库依赖**

- **用途**：列出 ELF 可执行文件或共享库所依赖的共享库。

- **常用场景**：排查动态链接错误、缺少库问题。

- **常用命令**：

  ```bash
  ldd main
  ```

------

### 总结对比表（作用一眼明了）：

| 工具      | 作用简介                 | 常用选项         | 用途关键词              |
| --------- | ------------------------ | ---------------- | ----------------------- |
| `nm`      | 查看符号表               | `-C`             | 符号、未定义函数        |
| `readelf` | 查看 ELF 文件结构信息    | `-a`、`-s`、`-h` | 段表、符号表、ELF头分析 |
| `objdump` | 反汇编、查看机器码       | `-d`、`-S`、`-C` | 汇编、源码、性能分析    |
| `strings` | 提取文件中的可打印字符串 | `-n 6`           | 可见字符、调试信息      |
| `ldd`     | 查看 ELF 文件依赖的库    | 无               | 动态链接检查            |

